<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Search - Ebooks</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- For browsers without prefers-color-scheme, change theme based on time of day -->
    <script type="text/javascript">
      if (window.matchMedia('(prefers-color-scheme: dark)').media === 'not all') {
        document.documentElement.style.display = 'none';
        var hour = new Date().getHours();
        var sheet = (hour >= 18 || hour < 7) ? "css/dark.css" : "css/light.css";
        document.head.insertAdjacentHTML(
          'beforeend',
          '<link rel="stylesheet" type="text/css" href="'+sheet+'" onload="document.documentElement.style.display = \'\'">'
        );
      }
    </script>
    <!-- For browsers without JS, load the light theme -->
    <noscript><link rel="stylesheet" type="text/css" href="css/light.css"></noscript>
    <!-- For browsers supporting prefers-color-scheme, use that -->
    <link rel="stylesheet" type="text/css" href="css/dark.css" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" type="text/css" href="css/light.css" media="(prefers-color-scheme: light)">

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('searchform').onsubmit = function(event) {
          event.preventDefault();
          var searchstring = event.currentTarget[0].value;
          console.log(event);
          var engines = [
            `https://libgen.rs/search.php?req=${searchstring}`,
            `https://annas-archive.org/search?q=${searchstring}`,
            `https://standardebooks.org/ebooks?query=${searchstring}`,
          ];
          for (var i in engines) {
            window.open(engines[i], "_blank");
          }
        }
      })
    </script>
  </head>
  <body>
    <noscript>This will not work without JS, which is required to open links in new tabs.</noscript>
    <h1>Search Movies</h1>
    <form id='searchform'>
      <input id='search' type="text" class="text" value="" name="q" placeholder="Search..." autocomplete="off" tabindex="0">
    </form>
  </body>
</html>
